<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <!--Report Ar-->
    <template id="report_journal_entry_document_ar">
        <t t-call="bi_print_journal_entries.custom_external_layout_ar">
            <t t-set="o" t-value="o.with_context(lang='ar_001')"/>
            <div class="page" dir="rtl">
                <center>
                    <h3>
                        <b style="font-family: Times New Roman;">قيد يومية</b>
                        <br/>
                        <br/>
                    </h3>
                </center>
                <h4>
                    <b>رقم.</b>
                    <span t-field="o.name"/>
                </h4>
                <div class="col-xs-8" style="font-size:12px">
                    <h5>
                        <strong>قيد:</strong>
                        <span t-field="o.journal_id"/>
                    </h5>
                </div>
                <div class="col-xs-4" style="font-size:12px">
                    <h5>
                        <strong>تاريخ:</strong>
                        <span t-field="o.date"/>
                    </h5>
                </div>
                <div class="col-xs-12" style="font-size:12px">
                    <h5>
                        <strong>مرجع:</strong>
                        <span t-field="o.ref"/>
                    </h5>
                    <br/>
                    <br/>
                    <br/>
                </div>
            </div>

            <table class="table table-condensed" width="400px" dir="rtl" style="font-size:14px">
                <thead>
                    <tr>
                        <th>الحساب</th>
                        <th>الشريك</th>
                        <!--<th>Label</th>-->
                        <th>البيان</th>
                        <th>المشروع</th>
                        <th t-if="o.payment_id">تاريخ الاستحقاق</th>
                        <th>العملة</th>
                        <!--<th>Due Date</th>-->
                        <!--<th>Amount Currency</th>-->
                        <th>المبلغ بالعملة</th>
                        <th>المعدل</th>
                        <th>المدين</th>
                        <th>الدائن</th>
                    </tr>
                </thead>
                <tbody class="invoice_tbody">

                    <tr t-foreach="o.line_ids.sorted(key=lambda line: line.debit,reverse=True)" t-as="l">
                        <td>
                            <span t-field="l.account_id"/>
                        </td>
                        <td>
                            <span t-field="l.partner_id"/>
                        </td>
                        <!--<td>-->
                        <!--<span t-field="l.name"/>-->
                        <!--</td>-->
                        <td style="font-size: 12px">
                            <span t-field="l.name"/>
                        </td>

                        <td>
                            <span t-if="l.analytic_distribution"
                                  t-esc="env['account.analytic.account'].sudo().browse(int(list(l.analytic_distribution.keys())[0])).display_name"/>
                        </td>
                        <td t-if="o.payment_id">
                            <span t-field="l.date_maturity"/>
                        </td>
                        <!--<td>-->
                        <!--<span t-field="l.amount_currency"/>-->
                        <!--</td>-->
                        <td>
                            <span t-field="l.currency_id"/>
                        </td>
                        <td>
                            <span t-field="l.amount_currency"
                                  t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                        </td>
                        <td>
                            <span t-field="l.exchange_rate"/>
                        </td>
                        <td>
                            <span t-field="l.debit"
                                  t-options='{"widget": "monetary", "display_currency": l.company_currency_id}'/>
                        </td>
                        <td>
                            <span t-field="l.credit"
                                  t-options='{"widget": "monetary", "display_currency": l.company_currency_id}'/>
                        </td>
                    </tr>

                    <tr/>
                    <tr class="border-black">
                        <td/>
                        <td/>
                        <td/>
                        <td/>
                        <td/>
                        <td/>
                        <td/>
                        <td t-if="o.payment_id"/>

                        <td>
                            <span t-field="o.total_debit"
                                  t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/>
                        </td>
                        <td>
                            <span t-field="o.total_credit"
                                  t-options='{"widget": "monetary", "display_currency": o.company_currency_id}'/>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p t-field="o.narration"/>
            <br/>
            <br/>

            <div class="row">
                <div class="col-6" dir="rtl">
                    <strong>
                        <u>المحاسب:</u>
                    </strong>
<!--                    <span t-field="o.accountant_id"/>-->
                </div>
                <div class="col-6" dir="rtl">
                    <strong>
                        <u>مدير الحسابات:</u>
                    </strong>
<!--                    <span t-field="o.account_manager_id"/>-->
<!--                    <span>M.Salah</span>-->
                </div>
            </div>
        </t>
    </template>


    <!--custom header and footer -->
    <template id="custom_external_layout_journal_entry_ar" inherit_id="web.external_layout_striped" primary="True">
        <!--add extra header-->
        <xpath expr="//div[@class='o_background_header']" position="replace">
            <div class="o_background_header" style="font-family: 'Cairo', sans-serif;">
                <div class="o_background_header">
                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" class="float-left" alt="Logo"/>
                    <div class="float-right company_address">
                        <div dir="rtl">
                            <t>
<!--                                <strong>القاهرة لأنظمة الاتصالات</strong>-->
                            </t>
                        </div>
                    </div>
                    <div class="clearfix mb8"/>
                </div>
            </div>
        </xpath>

        <xpath expr="//div[3]" position="replace">
            <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout"
                 style="font-family: 'Cairo', sans-serif;">

            </div>
        </xpath>

    </template>

    <!-- Add custom header and footer to the external layout template  -->
    <template id="custom_external_layout_ar" inherit_id="web.external_layout" primary="True">
        <xpath expr="//t[@t-call='{{company.external_report_layout_id.sudo().key}}']" position="replace">
            <t t-if="1" t-call="bi_print_journal_entries.custom_external_layout_journal_entry_ar">
                <t t-raw="0"/>
            </t>
        </xpath>
    </template>

    <!--TEMPLATE [JOURNAL ENTRY AR REPORT]-->
    <template id="report_custom_journal_entry_ar">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="bi_print_journal_entries.report_journal_entry_document_ar" t-lang="'ar_001'"/>
            </t>
        </t>
    </template>


    <report id="action_report_journal_entry_ar" model="account.move" string="Journal Entry Report (AR)"
            report_type="qweb-pdf" name="bi_print_journal_entries.report_custom_journal_entry_ar"
            file="bi_print_journal_entries.report_custom_journal_entry_ar" attachment_use="True"/>
</odoo>